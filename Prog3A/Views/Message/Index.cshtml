@model IEnumerable<Prog3A.Models.MessageModel>

@{
    ViewData["Title"] = "Messages";
}

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />

<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <style>
        textarea {
            resize: vertical;
        }

        .list-group-item {
            background-color: #f8f9fa;
            border-left: 4px solid #007bff;
            padding: 1rem;
        }

        .fw-bold.text-primary {
            font-size: 1rem;
        }

        .text-dark {
            font-size: 1.05rem;
        }
    </style>
</head>


<div class="container mt-4">
    <h2 class="mb-4">Discussion</h2>

    @if (TempData["Success"] != null)
    {
        <div class="alert alert-success">@TempData["Success"]</div>
    }
    @if (TempData["Error"] != null)
    {
        <div class="alert alert-danger">@TempData["Error"]</div>
    }

    <form asp-action="SendMessage" method="post" class="mb-4">
        <div class="form-group">
            <textarea class="form-control" name="Content" id="Content" rows="3" placeholder="What's on your mind?"
                maxlength="1000" required></textarea>
        </div>
        <button type="submit" class="btn btn-primary mt-2">Post Message</button>
    </form>

    <hr />

    <div class="list-group">
        @foreach (var message in Model)
        {
            <div class="list-group-item mb-3 shadow-sm rounded">
                <div class="d-flex justify-content-between mb-1">
                    <div class="fw-bold text-primary">@message.UserName</div>
                    <small class="text-muted">@message.SentAt.ToString("g")</small>
                </div>
                <div class="text-dark">@message.Content</div>
            </div>
        }
    </div>
</div>
